!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("SimpleGoals",[],n):"object"==typeof exports?exports.SimpleGoals=n():e.SimpleGoals=n()}(window,(function(){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";function o(e,n,t,o,r,i,s){try{var a=e[i](s),l=a.value}catch(e){return void t(e)}a.done?n(l):Promise.resolve(l).then(o,r)}function r(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function a(e){o(s,r,i,a,l,"next",e)}function l(e){o(s,r,i,a,l,"throw",e)}a(void 0)}))}}t.r(n),t.d(n,"init",(function(){return S})),t.d(n,"unlock",(function(){return O})),t.d(n,"showOverview",(function(){return j})),t(1);var i={timeout:0,onGoalUnlock:function(e){},useCloudStorage:!1,appId:null,user:{}},s=null,a=null,l=function(){var e=r(regeneratorRuntime.mark((function e(n,t){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.simplegoals.co").concat(n),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:if(!(o=e.sent).ok){e.next=9;break}return e.next=6,o.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),c=function(e){if("undefined"!=typeof Storage){var n=u();n.push(e),localStorage.setItem("simplegoals-storage",JSON.stringify(n))}},u=function(){return"undefined"!=typeof Storage&&JSON.parse(localStorage.getItem("simplegoals-storage"))||[]},p=function(){var e=r(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.useCloudStorage){e.next=7;break}return v(t={name:n}),e.next=5,l("/goals/unlock",t);case 5:e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(e){Object.assign(i,e)},v=function(e){e.appId=i.appId,e.user=i.user},m=function(){var e=r(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.useCloudStorage){e.next=9;break}return n={goals:Object.keys(s).map((function(e){return{name:e,description:s[e].description}})),unlockedGoals:Object.keys(s).filter((function(e){s[e].unlocked}))},v(n),e.next=5,l("/sessions",n);case 5:(t=e.sent)&&g(t),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(e){s=e.goals;for(var n=u(),t=0,o=Object.keys(s);t<o.length;t++){var r=o[t];s[r].unlocked=n.includes(r)}},g=function(e){for(var n=0,t=Object.keys(s);n<t.length;n++){var o=t[n];s[o].unlocked=e.unlockedGoals.includes(o)}},h=function(){for(var e=document.getElementsByClassName("simplegoals-achievement"),n=0;n<e.length;n++)e[n].style.top="".concat(1+7*n,"em")},b=function(){var e="",n=Object.keys(s).sort((function(e,n){return s[n].unlocked-s[e].unlocked})),t=!0,o=!1,r=void 0;try{for(var i,a=n[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value;e+='\n    <div class="simplegoals-overview-goal '.concat(s[l].unlocked?"":"simplegoals-overview-goal--locked",'">\n      <div class="simplegoals-overview-goal__icon">\n        <img src="https://static.simplegoals.co/cup.svg" />\n      </div>\n      <div class="simplegoals-overview-goal__body">\n        <h3 class="simplegoals-overview-goal__name">').concat(s[l].name,'</h3>\n        <p class="simplegoals-overview-goal__description">\n          ').concat(s[l].description,"\n        </p>\n      </div>\n    </div>\n    ")}}catch(e){o=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(o)throw r}}return e},_=function(){var e,n;e='\n  <div class="simplegoals-overview" id="simplegoals-overview">\n    <div class="simplegoals-overview__wrapper">\n      <div class="simplegoals-overview__body">\n        <h1 class="simplegoals-overview__title">Achievements</h1>\n        <p class="simplegoals-overview__subtitle">Complete tasks and unlock achievements</p>\n        <div class="simplegoals-overview__goals" id="simplegoals-overview__goals">\n        '+b()+'\n        </div>\n        <button class="simplegoals-overview__close-button" id="simplegoals-overview__close-button">\n          Close\n        </button>\n        <div class="simplegoals-overview__attribution">\n          Powered by <a class="simplegoals-overview__attribution-link" href="https://simplegoals.co" target="_blank">SimpleGoals</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  ',n=(new DOMParser).parseFromString(e,"text/html").body.firstChild,document.body.appendChild(n)},w=function(e,n){var t=function(e){var n=0;if(0==e.length)return n;for(var t=0;t<e.length;t++){n=(n<<5)-n+e.charCodeAt(t),n&=n}return n}(e),o=function(e,n,t){var o='\n  <div class="simplegoals-achievement" id="simplegoals-achievement-'.concat(e,'">\n    <div class="simplegoals-achievement__icon">\n      <img src="https://static.simplegoals.co/cup.svg" />\n    </div>\n    <div class="simplegoals-achievement__body">\n      <p class="simplegoals-achievement__notification">\n        New achievement unlocked\n      </p>\n      <p class="simplegoals-achievement__name" id="simplegoals-achievement__name">').concat(n.name,'</p>\n    </div>\n    <div class="simplegoals-achievement__button" id="simplegoals-achievement__button-').concat(e,'" role="button">').concat(t,'</div>\n    <button class="simplegoals-achievement__close-button" id="simplegoals-achievement__close-button-').concat(e,'">\n      <svg viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <g>\n          <path d="M50 50L450 450" stroke-width="100" stroke-linecap="round"/>\n          <path d="M50 450L450 50" stroke-width="100" stroke-linecap="round"/>\n        </g>\n      </svg>\n    </button>\n  </div>\n  '),r=(new DOMParser).parseFromString(o,"text/html").body.firstChild;document.getElementById("simplegoals-overview-box");return document.body.appendChild(r),r}(t,n,"Learn more");h(),o.classList.add("simplegoals-achievement--opened"),k(t,o),i.timeout&&(achievementTimeout=setTimeout((function(){return y(o)}),i.timeout))},y=function(e){e.classList.remove("simplegoals-achievement--opened"),e.classList.add("simplegoals-achievement--closed"),setTimeout((function(){e.parentNode.removeChild(e),h()}),2e3)},k=function(e,n){n.addEventListener("click",(function(e){return n.classList.toggle("simplegoals-achievement--clicked")})),document.getElementById("simplegoals-achievement__close-button-".concat(e)).addEventListener("click",(function(e){return y(n)})),document.getElementById("simplegoals-achievement__button-".concat(e)).addEventListener("click",(function(e){y(n),setTimeout(j,200)}))},x=function(){a=document.getElementById("simplegoals-overview"),document.getElementById("simplegoals-overview__close-button").addEventListener("click",(function(e){a.classList.remove("simplegoals-overview--opened")}))},S=function(){var e=r(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(n),f(n),e.next=4,m();case 4:_(),x(),document.addEventListener("click",(function(e){e.target.dataset.simplegoalsUnlock&&(e.preventDefault(),O(e.target.dataset.simplegoalsUnlock)),e.target.dataset.simplegoalsOverview&&(e.preventDefault(),j())}),!1);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=r(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s[n]){e.next=2;break}return e.abrupt("return");case 2:if(!s[n].unlocked){e.next=4;break}return e.abrupt("return");case 4:return s[n].unlocked=!0,i.onGoalUnlock(n),c(n),e.next=9,p(n);case 9:w(n,s[n]),document.getElementById("simplegoals-overview__goals").innerHTML=b();case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),j=function(){a.scrollTo(0,0),a.classList.add("simplegoals-overview--opened")};n.default={init:S,unlock:O,showOverview:j}},function(e,n,t){}])}));