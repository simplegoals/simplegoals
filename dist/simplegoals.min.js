!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("SimpleGoals",[],t):"object"==typeof exports?exports.SimpleGoals=t():e.SimpleGoals=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=function(e,t){if("undefined"!=typeof Storage&&!t.freshStart){var n=o(t);n.push(e),localStorage.setItem("simplegoals-storage",JSON.stringify(n))}},o=function(e){return"undefined"==typeof Storage||e.freshStart?[]:JSON.parse(localStorage.getItem("simplegoals-storage"))||[]},i=function(e){for(var t=e.goals,n=o(e),r=0,i=Object.keys(t);r<i.length;r++){var a=i[r];t[a].unlocked=n.includes(a)}return t};function a(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var s=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://api.simplegoals.co").concat(t),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});case 2:if(!(r=e.sent).ok){e.next=9;break}return e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){a(i,r,o,s,l,"next",e)}function l(e){a(i,r,o,s,l,"throw",e)}s(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();function l(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){l(i,r,o,a,s,"next",e)}function s(e){l(i,r,o,a,s,"throw",e)}a(void 0)}))}}var u=function(){var e=c(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.useCloudStorage){e.next=7;break}return p(r={name:t},n),e.next=5,s("/goals/unlock",r);case 5:e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(e,t){e.appId=t.appId,e.user=t.user},v=function(){var e=c(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.useCloudStorage){e.next=9;break}return r={goals:Object.keys(t).map((function(e){return{name:e,description:t[e].description}})),unlockedGoals:Object.keys(t).filter((function(e){t[e].unlocked}))},p(r,n),e.next=5,s("/sessions",r);case 5:(o=e.sent)&&m(o,t),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];t[o].unlocked=e.unlockedGoals.includes(o)}},f={fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif',background:"#ffffff",title:"#000000",subtitle:"#718096",primary:"#38b2ac",primaryHover:"#319795",opposite:"#ffffff"},d=function(e){var t=parseInt(e.substring(1,3),16),n=parseInt(e.substring(3,5),16),r=parseInt(e.substring(5,7),16);return t=parseInt(93*t/100),n=(n=parseInt(93*n/100))<255?n:255,r=(r=parseInt(93*r/100))<255?r:255,"#"+(1==(t=t<255?t:255).toString(16).length?"0"+t.toString(16):t.toString(16))+(1==n.toString(16).length?"0"+n.toString(16):n.toString(16))+(1==r.toString(16).length?"0"+r.toString(16):r.toString(16))},g=function(e){if(0===e.indexOf("#")&&(e=e.slice(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),6!==e.length)throw new Error("Invalid HEX color.");return.299*parseInt(e.slice(0,2),16)+.587*parseInt(e.slice(2,4),16)+.114*parseInt(e.slice(4,6),16)>186?"#000000":"#FFFFFF"},h=function(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=f;return["fontFamily","background","title","subtitle"].forEach((function(n){e[n]&&(t[n]=e[n])})),e.primary&&(t.primary=e.primary,t.primaryHover=d(e.primary),t.opposite=g(e.primary)),["primaryHover","opposite"].forEach((function(n){e[n]&&(t[n]=e[n])})),t}(t.theme);e.style.setProperty("--simplegoals-font-family",n.fontFamily),e.style.setProperty("--simplegoals-color-background",n.background),e.style.setProperty("--simplegoals-color-title",n.title),e.style.setProperty("--simplegoals-color-subtitle",n.subtitle),e.style.setProperty("--simplegoals-color-primary",n.primary),e.style.setProperty("--simplegoals-color-primary-hover",n.primaryHover),e.style.setProperty("--simplegoals-color-opposite",n.opposite)},y=null,b=function(e,t){var n='\n  <div class="simplegoals-overview" id="simplegoals-overview">\n    <div class="simplegoals-overview__wrapper">\n      <div class="simplegoals-overview__body">\n        <h1 class="simplegoals-overview__title">Achievements</h1>\n        <p class="simplegoals-overview__subtitle">Complete tasks and unlock achievements</p>\n        <div class="simplegoals-overview__goals" id="simplegoals-overview__goals">\n        '+w(e)+'\n        </div>\n        <button class="simplegoals-overview__close-button" id="simplegoals-overview__close-button">\n          Close\n        </button>\n        <div class="simplegoals-overview__attribution">\n          Powered by <a class="simplegoals-overview__attribution-link" href="https://simplegoals.co" target="_blank">SimpleGoals</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  ',r=(new DOMParser).parseFromString(n,"text/html").body.firstChild;h(r,t),document.body.appendChild(r)},w=function(e){var t="",n=Object.keys(e).sort((function(t,n){return e[n].unlocked-e[t].unlocked})),r=!0,o=!1,i=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;t+='\n    <div class="simplegoals-overview-goal '.concat(e[l].unlocked?"":"simplegoals-overview-goal--locked",'">\n      <div class="simplegoals-overview-goal__icon">\n        <img src="https://static.simplegoals.co/cup.svg" />\n      </div>\n      <div class="simplegoals-overview-goal__body">\n        <h3 class="simplegoals-overview-goal__name">').concat(e[l].name,'</h3>\n        <p class="simplegoals-overview-goal__description">\n          ').concat(e[l].description,"\n        </p>\n      </div>\n    </div>\n    ")}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return t},_=function(e){document.getElementById("simplegoals-overview__goals").innerHTML=w(e)},k=function(){y&&(y.scrollTo(0,0),y.classList.add("simplegoals-overview--opened"))},x=function(){y.classList.remove("simplegoals-overview--opened")};function S(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}var O=function(){for(var e=document.getElementsByClassName("simplegoals-achievement"),t=0;t<e.length;t++)e[t].style.top="".concat(1+7*t,"em")},P=function(e,t,n){var r=function(e){var t=0;if(0==e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}(e),o=function(e,t,n,r){var o='\n  <div class="simplegoals-achievement" id="simplegoals-achievement-'.concat(e,'">\n    <div class="simplegoals-achievement__icon">\n      <img src="https://static.simplegoals.co/cup.svg" />\n    </div>\n    <div class="simplegoals-achievement__body">\n      <p class="simplegoals-achievement__notification">\n        New achievement unlocked\n      </p>\n      <p class="simplegoals-achievement__name" id="simplegoals-achievement__name">').concat(t.name,'</p>\n    </div>\n    <div class="simplegoals-achievement__button" id="simplegoals-achievement__button-').concat(e,'" role="button">').concat(n,'</div>\n    <button class="simplegoals-achievement__close-button" id="simplegoals-achievement__close-button-').concat(e,'">\n      <svg viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <g>\n          <path d="M50 50L450 450" stroke-width="100" stroke-linecap="round"/>\n          <path d="M50 450L450 50" stroke-width="100" stroke-linecap="round"/>\n        </g>\n      </svg>\n    </button>\n  </div>\n  '),i=(new DOMParser).parseFromString(o,"text/html").body.firstChild;return h(i,r),document.body.appendChild(i),i}(r,t,"Learn more",n);O(),o.classList.add("simplegoals-achievement--opened"),I(r,o),n.timeout&&(achievementTimeout=setTimeout((function(){return j(o)}),n.timeout))},I=function(e,t){t.addEventListener("click",(function(e){return t.classList.toggle("simplegoals-achievement--clicked")})),document.getElementById("simplegoals-achievement__close-button-".concat(e)).addEventListener("click",(function(e){return j(t)})),document.getElementById("simplegoals-achievement__button-".concat(e)).addEventListener("click",(function(e){j(t),setTimeout(k,200)}))},j=function(e){e.classList.remove("simplegoals-achievement--opened"),e.classList.add("simplegoals-achievement--closed"),setTimeout((function(){e.parentNode.removeChild(e),O()}),2e3)},E=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n[t]){e.next=2;break}return e.abrupt("return");case 2:if(!n[t].unlocked){e.next=4;break}return e.abrupt("return");case 4:return n[t].unlocked=!0,o.onGoalUnlock(t),r(t,o),e.next=9,u(t,o);case 9:P(t,n[t],o),_(n);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){S(i,r,o,a,s,"next",e)}function s(e){S(i,r,o,a,s,"throw",e)}a(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}(),L=function(e,t){document.addEventListener("click",(function(n){n.target.dataset.simplegoalsUnlock&&(n.preventDefault(),E(n.target.dataset.simplegoalsUnlock,e,t)),n.target.dataset.simplegoalsOverview&&(n.preventDefault(),k())}),!1)};function C(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){C(i,r,o,a,s,"next",e)}function s(e){C(i,r,o,a,s,"throw",e)}a(void 0)}))}}n.d(t,"init",(function(){return T})),n.d(t,"unlock",(function(){return B})),n.d(t,"showOverview",(function(){return k})),n(0);var R={timeout:0,onGoalUnlock:function(e){},freshStart:!1,useCloudStorage:!1,appId:null,user:{}},M=null,T=function(){var e=F(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.assign(R,t),M=i(R),e.next=4,v(M,R);case 4:b(M,R),y=document.getElementById("simplegoals-overview"),document.getElementById("simplegoals-overview__close-button").addEventListener("click",(function(e){return x()})),L(M,R);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=F(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(t,M,R);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default={init:T,unlock:B,showOverview:k}}])}));